<!doctype html>
<html lang='pt-BR'>

<head>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width,initial-scale=1' />
    <title>Semana 5 ‚Äî Formul√°rios, Valida√ß√£o e Configura√ß√£o do Firebase</title>
    <link rel='stylesheet' type='text/css' href='../css/style.css' />
</head>

<body>
    <div class='container'>

        <header>
            <h1 id='sem5'>SEMANA 5 ‚Äì Formul√°rios, Valida√ß√£o e Configura√ß√£o do Firebase</h1>
            <p class='lead'>Nesta semana, voc√™ ir√° configurar o projeto Firebase, criar o banco de dados
                Firestore, definir as cole√ß√µes no FlutterFlow e planejar as valida√ß√µes dos
                formul√°rios. A partir da pr√≥xima semana, o app j√° estar√° conectado ao banco.</p>
        </header>
        <hr />

        <p>Agora que voc√™ tem o modelo conceitual do banco de dados (DER), √© hora de transformar
            esse modelo em uma <strong>estrutura real de cole√ß√µes e documentos</strong> no Firestore.
            Nesta semana voc√™ configura todo o ambiente Firebase ‚Äî do projeto ao banco de dados ‚Äî para
            que na <strong>Semana 6</strong> a autentica√ß√£o e o CRUD estejam prontos para uso.</p>

        <table class="box-table tip-table">
            <tr>
                <td class="box-content tip" role="note" aria-labelledby="curiosity-s5">
                    <div id="curiosity-s5" class="box-title"><img src="../images/icon-observacao.png" class="icon-img"
                            alt="Curiosidade"><strong>Voc√™ Sabia?</strong></div>
                    <div>
                        <ul>
                            <li>O <strong>Firebase</strong> √© uma plataforma do Google que integra mais de
                                18 servi√ßos ‚Äî banco de dados, autentica√ß√£o, storage, hosting, analytics,
                                notifica√ß√µes push e muito mais ‚Äî tudo com um √∫nico SDK.</li>
                            <li>O <strong>Firestore</strong> √© o banco de dados NoSQL do Firebase, organizado
                                em <strong>cole√ß√µes</strong> (collections) e <strong>documentos</strong>
                                (documents), similar a uma estrutura de pastas e arquivos JSON.</li>
                            <li>O plano gratuito do Firebase (<strong>Spark</strong>) oferece at√©
                                <strong>1 GiB de armazenamento</strong> e <strong>50.000 leituras/dia</strong>
                                ‚Äî mais que suficiente para projetos acad√™micos.
                            </li>
                        </ul>
                        <p class="small" style="margin-top: 1em; color: #666; font-style: italic;">Fonte:
                            Firebase Documentation; Google Cloud.</p>
                    </div>
                </td>
            </tr>
        </table>

        <section id='sec5-1'>
            <h2>5.1 Configurando o Firebase</h2>
            <p>O FlutterFlow <strong>n√£o possui um banco de dados local relacional nativo</strong>
                (como SQLite) sem c√≥digo personalizado avan√ßado. As op√ß√µes nativas para persist√™ncia
                de dados s√£o servi√ßos na nuvem: <strong>Firebase</strong>, Supabase ou uma API REST.
                Para este projeto, o Firebase √© a escolha ideal ‚Äî √© gratuito, visual, integrado
                nativamente ao FlutterFlow e conta com autentica√ß√£o, banco de dados e storage
                em uma √∫nica plataforma.</p>

            <h3>Passo 1 ‚Äî Criar o Projeto no Firebase</h3>
            <ol>
                <li>Acesse <strong><a href="https://firebase.google.com"
                            target="_blank">firebase.google.com</a></strong>
                    e crie uma conta com suas credenciais Google.</li>
                <li>Clique em <strong>Ir para o console</strong> (canto superior direito).</li>
                <li>Clique em <strong>Criar um projeto</strong> (ou <em>Add Project</em>).</li>
                <li>Escolha um nome para o projeto (ex.: <code>financampus</code>).</li>
                <li><strong>Desative o Google Analytics</strong> (n√£o √© necess√°rio para este projeto) e
                    clique em <strong>Criar projeto</strong>.</li>
                <li>Aguarde a cria√ß√£o (cerca de 30 segundos) e clique em <strong>Continuar</strong>.</li>
            </ol>

            <h3>Passo 2 ‚Äî Criar o Banco de Dados Firestore</h3>
            <ol>
                <li>No menu lateral do console Firebase, acesse <strong>Cria√ß√£o ‚Üí Firestore Database</strong>.</li>
                <li>Clique em <strong>Criar banco de dados</strong>.</li>
                <li>Selecione <strong>Iniciar no modo de teste</strong> ‚Äî isso permite leitura e escrita
                    livres durante o desenvolvimento. As <strong>Security Rules</strong> ser√£o configuradas
                    na Semana 9.</li>
                <li>Escolha um servidor pr√≥ximo de voc√™ (ex.: <em>southamerica-east1</em> para S√£o Paulo).</li>
                <li>Clique em <strong>Ativar</strong>.</li>
            </ol>

            <table class="box-table tip-table">
                <tr>
                    <td class="box-content tip" role="note" aria-labelledby="tip-s5-testmode">
                        <div id="tip-s5-testmode" class="box-title"><img src="../images/icon-observacao.png"
                                class="icon-img" alt="Dica"><strong>Modo de Teste vs. Produ√ß√£o</strong></div>
                        <div>
                            <p>O <strong>modo de teste</strong> permite que qualquer pessoa leia e escreva
                                dados por 30 dias. Isso √© perfeito para o desenvolvimento ‚Äî quando
                                chegarmos √† <strong>Semana 9</strong>, configuraremos as
                                <strong>Security Rules</strong> para proteger os dados antes de publicar.
                            </p>
                        </div>
                    </td>
                </tr>
            </table>

            <h3>Passo 3 ‚Äî Conceder Permiss√µes ao FlutterFlow</h3>
            <p>Para que o FlutterFlow consiga acessar e configurar seu projeto Firebase, √© necess√°rio
                conceder permiss√µes espec√≠ficas:</p>
            <ol>
                <li>No console do Firebase, clique na <strong>engrenagem ‚öôÔ∏è</strong> ao lado de
                    <em>Vis√£o geral do projeto</em> e selecione <strong>Usu√°rios e permiss√µes</strong>.
                </li>
                <li>Clique em <strong>Adicionar membro</strong>.</li>
                <li>Insira o e-mail: <code>firebase@flutterflow.io</code></li>
                <li>Defina o papel como <strong>Editor</strong> e clique em <strong>Concluir</strong>.</li>
                <li>Volte para <strong>Configura√ß√µes avan√ßadas de permiss√µes</strong> (abre o Google Cloud Console).
                </li>
                <li>Localize o membro <code>firebase@flutterflow.io</code> e clique em <strong>Editar
                        principal</strong>.</li>
                <li>Clique em <strong>Adicionar outro papel</strong> e adicione:
                    <ul>
                        <li><strong>Administrador da Cloud Functions</strong></li>
                        <li><strong>Usu√°rio da conta de servi√ßo</strong></li>
                    </ul>
                </li>
                <li>Clique em <strong>Salvar</strong>.</li>
            </ol>

            <h3>Passo 4 ‚Äî Ativar a Autentica√ß√£o no Firebase</h3>
            <ol>
                <li>No menu lateral do console Firebase, acesse <strong>Cria√ß√£o ‚Üí Authentication</strong>.</li>
                <li>Clique em <strong>Vamos come√ßar</strong>.</li>
                <li>Em <strong>Provedores de login</strong>, clique em <strong>E-mail/senha</strong>.</li>
                <li>Ative o toggle e clique em <strong>Salvar</strong>.</li>
            </ol>

            <h3>Passo 5 ‚Äî Conectar o Firebase ao FlutterFlow</h3>
            <ol>
                <li>No console Firebase, acesse <strong>Configura√ß√µes do projeto</strong>
                    (engrenagem ‚öôÔ∏è) e copie o <strong>ID do projeto</strong>.</li>
                <li>No FlutterFlow, acesse <strong>Settings ‚Üí Firebase</strong>.</li>
                <li>Cole o <strong>ID do projeto</strong> e clique em <strong>Connect</strong>.</li>
                <li>Clique em <strong>Auto Generate Config Files</strong> e depois em
                    <strong>Generate Config Files</strong> ‚Äî isso gera automaticamente os arquivos
                    de configura√ß√£o necess√°rios.
                </li>
                <li>Acesse <strong>Settings ‚Üí Authentication</strong> e ative o toggle
                    <strong>Enable Authentication</strong>.
                </li>
            </ol>

            <table class="box-table warning-table">
                <tr>
                    <td class="box-content warning" role="note" aria-labelledby="warn-s5-connected">
                        <div id="warn-s5-connected" class="box-title"><img src="../images/icon-importante.png"
                                class="icon-img" alt="Importante"><strong>Verifica√ß√£o</strong></div>
                        <div>
                            <p>Ap√≥s conectar, confirme que aparece um <strong>‚úì verde</strong> ao lado do
                                nome do projeto Firebase no FlutterFlow. Se houver erro, verifique se as
                                permiss√µes do Passo 3 foram configuradas corretamente.</p>
                        </div>
                    </td>
                </tr>
            </table>
        </section>

        <section id='sec5-2'>
            <h2>5.2 Tipos de Dados no Firestore</h2>
            <p>Diferente de bancos relacionais que usam SQL e tipos r√≠gidos, o Firestore armazena dados
                em formato de <strong>documentos JSON-like</strong>. Cada documento cont√©m campos com
                tipos espec√≠ficos:</p>

            <table class='content-table'>
                <caption><strong>Tabela 5.1 - </strong>Tipos de dados dispon√≠veis no Firestore.</caption>
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                        <th>Exemplo de Uso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>String</strong></td>
                        <td>Texto de tamanho vari√°vel</td>
                        <td>nome, descricao, email</td>
                    </tr>
                    <tr>
                        <td><strong>Number (int/double)</strong></td>
                        <td>N√∫mero inteiro ou decimal</td>
                        <td>valor, quantidade, pontuacao</td>
                    </tr>
                    <tr>
                        <td><strong>Boolean</strong></td>
                        <td>Verdadeiro ou falso</td>
                        <td>ativo, concluido, favorito</td>
                    </tr>
                    <tr>
                        <td><strong>Timestamp</strong></td>
                        <td>Data e hora com precis√£o</td>
                        <td>criadoEm, dataVencimento</td>
                    </tr>
                    <tr>
                        <td><strong>Reference</strong></td>
                        <td>Refer√™ncia a outro documento</td>
                        <td>usuarioRef (aponta para Users)</td>
                    </tr>
                    <tr>
                        <td><strong>Map</strong></td>
                        <td>Objeto aninhado (sub-documento)</td>
                        <td>endereco: { rua, cidade, cep }</td>
                    </tr>
                    <tr>
                        <td><strong>Array</strong></td>
                        <td>Lista de valores</td>
                        <td>tags: ["urgente", "trabalho"]</td>
                    </tr>
                </tbody>
            </table>

            <p>A <strong>Figura 5.2</strong> mostra o fluxo completo de dados entre o app FlutterFlow e
                o banco de dados Firebase, evidenciando como as Actions de escrita (Create Document) e
                as Queries de leitura (Query Collection) transitam pelo Firebase SDK.</p>

            <figure class='figure'>
                <img src='../images/fig05_2_supabase_fluxo.png'
                    alt='Diagrama de arquitetura em tr√™s camadas mostrando o fluxo de dados entre FlutterFlow (frontend), Firebase SDK e Firestore (banco de dados)'
                    class='figure-img' />
                <figcaption class='figure-caption'><strong>Figura 5.2 ‚Äî </strong>Fluxo de dados entre FlutterFlow e
                    Firebase: cada campo do formul√°rio se traduz em um campo no documento do Firestore.</figcaption>
            </figure>
        </section>

        <section id='sec5-3'>
            <h2>5.3 Definindo as Cole√ß√µes no FlutterFlow</h2>
            <p>Com o Firebase conectado, agora √© hora de criar as cole√ß√µes que representam as
                entidades do seu DER. No FlutterFlow, as cole√ß√µes Firestore s√£o definidas
                diretamente na se√ß√£o <strong>Firestore</strong> do painel lateral:</p>

            <ol>
                <li>No FlutterFlow, acesse <strong>Firestore</strong> no menu lateral (√≠cone de banco de dados).</li>
                <li>Clique em <strong>+ Create Collection</strong>.</li>
                <li>Defina o nome da cole√ß√£o (ex.: <code>despesas</code>).</li>
                <li>Adicione os campos com seus tipos (ex.: <code>descricao</code> como String,
                    <code>valor</code> como Double, <code>data</code> como Timestamp).
                </li>
                <li>Para refer√™ncias a outra cole√ß√£o, use o tipo <strong>Reference</strong> e
                    aponte para a cole√ß√£o desejada (ex.: <code>usuarioRef</code> ‚Üí Users).</li>
                <li>Repita para todas as cole√ß√µes do seu DER.</li>
            </ol>

            <table class="box-table tip-table">
                <tr>
                    <td class="box-content tip" role="note" aria-labelledby="tip-s5-nosql">
                        <div id="tip-s5-nosql" class="box-title"><img src="../images/icon-observacao.png"
                                class="icon-img" alt="Dica"><strong>Sem SQL necess√°rio!</strong></div>
                        <div>
                            <p>Diferente de bancos relacionais que exigem scripts <code>CREATE TABLE</code>,
                                no Firestore as cole√ß√µes s√£o criadas diretamente pela interface do FlutterFlow
                                ou do console Firebase. N√£o √© necess√°rio escrever SQL ‚Äî a estrutura √© definida
                                visualmente e os documentos s√£o criados automaticamente quando o primeiro
                                registro √© salvo pelo app.</p>
                        </div>
                    </td>
                </tr>
            </table>

            <table class="box-table tip-table">
                <tr>
                    <td class="box-content tip" role="note" aria-labelledby="def-s5-colecao">
                        <div id="def-s5-colecao" class="box-title"><img src="../images/icon-definicao.png"
                                class="icon-img" alt="Defini√ß√£o"><strong>Cole√ß√£o vs. Tabela</strong></div>
                        <div>
                            <p>Uma <strong>cole√ß√£o</strong> no Firestore √© equivalente a uma
                                <strong>tabela</strong> no modelo relacional. A diferen√ßa √© que cada
                                <strong>documento</strong> (equivalente a uma linha/registro) pode ter campos
                                diferentes ‚Äî embora, na pr√°tica, mantemos todos os documentos de uma cole√ß√£o
                                com a mesma estrutura para facilitar as queries.
                            </p>
                        </div>
                    </td>
                </tr>
            </table>
        </section>

        <section id='sec5-4'>
            <h2>5.4 Planejamento das Valida√ß√µes de Formul√°rio</h2>
            <p>A <strong>valida√ß√£o</strong> garante que os dados inseridos pelo usu√°rio estejam corretos
                antes de serem salvos no banco. No FlutterFlow, a valida√ß√£o √© configurada nos campos
                do formul√°rio via <strong>Form Validation</strong> ‚Äî como o banco de dados j√° est√°
                conectado ao Firebase, os widgets podem ser configurados <em>j√° vinculados √†s
                    cole√ß√µes reais</em> do Firestore.</p>

            <h3>Tipos de Valida√ß√£o Comuns</h3>
            <table class='content-table'>
                <caption><strong>Tabela 5.2 - </strong>Valida√ß√µes comuns em formul√°rios de apps.</caption>
                <thead>
                    <tr>
                        <th>Tipo de Valida√ß√£o</th>
                        <th>Regra</th>
                        <th>Exemplo de Mensagem</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Campo obrigat√≥rio</strong></td>
                        <td>O campo n√£o pode estar vazio</td>
                        <td>"Este campo √© obrigat√≥rio"</td>
                    </tr>
                    <tr>
                        <td><strong>Tamanho m√≠nimo</strong></td>
                        <td>O texto deve ter ao menos N caracteres</td>
                        <td>"A senha deve ter no m√≠nimo 6 caracteres"</td>
                    </tr>
                    <tr>
                        <td><strong>Formato de e-mail</strong></td>
                        <td>O campo deve seguir o padr√£o user@domain.com</td>
                        <td>"Digite um e-mail v√°lido"</td>
                    </tr>
                    <tr>
                        <td><strong>Valor num√©rico</strong></td>
                        <td>O campo deve conter apenas n√∫meros</td>
                        <td>"Digite apenas n√∫meros"</td>
                    </tr>
                    <tr>
                        <td><strong>Valor maior que zero</strong></td>
                        <td>O n√∫mero deve ser positivo</td>
                        <td>"O valor deve ser maior que R$ 0,00"</td>
                    </tr>
                </tbody>
            </table>

            <h3>Como Documentar as Valida√ß√µes</h3>
            <p>Para cada formul√°rio do seu projeto, crie uma tabela de planejamento indicando campo
                a campo quais valida√ß√µes ser√£o aplicadas. Esse documento ser√° o guia de refer√™ncia
                na hora de configurar os formul√°rios no FlutterFlow.</p>

            <p>A <strong>Figura 5.1</strong> exemplifica uma tabela de planejamento completa para o
                formul√°rio "Nova Despesa" do app FinanCampus, mostrando campo, tipo de widget,
                regra de valida√ß√£o e mensagem de erro esperada.</p>

            <figure class='figure'>
                <img src='../images/fig05_1_validacao.png'
                    alt='Tabela de planejamento de valida√ß√µes do formul√°rio Nova Despesa' class='figure-img' />
                <figcaption class='figure-caption'><strong>Figura 5.1 ‚Äî </strong>Tabela de planejamento de valida√ß√µes
                    para o formul√°rio "Nova Despesa" (FinanCampus).</figcaption>
            </figure>

            <table class='content-table'>
                <caption><strong>Tabela 5.3 - </strong>Exemplo de tabela de planejamento de valida√ß√µes
                    para o formul√°rio "Nova Despesa".</caption>
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Tipo de Widget</th>
                        <th>Valida√ß√£o</th>
                        <th>Mensagem de Erro</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Valor</td>
                        <td>TextField (num√©rico)</td>
                        <td>Obrigat√≥rio, maior que zero</td>
                        <td>"O valor deve ser maior que R$ 0,00"</td>
                    </tr>
                    <tr>
                        <td>Descri√ß√£o</td>
                        <td>TextField (texto)</td>
                        <td>Obrigat√≥rio, m√≠nimo 3 caracteres</td>
                        <td>"Descri√ß√£o obrigat√≥ria (m√≠n. 3 caracteres)"</td>
                    </tr>
                    <tr>
                        <td>Data</td>
                        <td>DatePicker</td>
                        <td>Obrigat√≥rio, n√£o permite datas futuras</td>
                        <td>"Selecione uma data v√°lida"</td>
                    </tr>
                    <tr>
                        <td>Categoria</td>
                        <td>DropDown (vinculado √† cole√ß√£o <code>categorias</code>)</td>
                        <td>Obrigat√≥rio (sele√ß√£o n√£o pode ser vazia)</td>
                        <td>"Selecione uma categoria"</td>
                    </tr>
                </tbody>
            </table>

            <table class="box-table warning-table">
                <tr>
                    <td class="box-content warning" role="note" aria-labelledby="warn-s5">
                        <div id="warn-s5" class="box-title"><img src="../images/icon-importante.png" class="icon-img"
                                alt="Importante"><strong>Importante</strong></div>
                        <div>
                            <p>Nunca confie somente na valida√ß√£o do frontend. As
                                <strong>Security Rules do Firebase</strong> (configuradas na Semana 9) s√£o
                                a segunda camada de prote√ß√£o ‚Äî elas impedem que dados inv√°lidos ou
                                n√£o autorizados cheguem ao banco, mesmo que algu√©m tente enviar diretamente
                                pela API.
                            </p>
                        </div>
                    </td>
                </tr>
            </table>
        </section>

        <section id='sec5-5'>
            <h2>5.5 Entreg√°vel da Semana</h2>

            <table class="box-table tip-table">
                <tr>
                    <td class="box-content tip" role="note" aria-labelledby="resumo-s5">
                        <div id="resumo-s5" class="box-title"><img src="../images/icon-observacao.png" class="icon-img"
                                alt="Resumo"><strong>Resumo da Semana</strong></div>
                        <div>
                            <ul>
                                <li><strong>Projeto Firebase criado</strong> e conectado ao FlutterFlow
                                    (Steps 1-5 da se√ß√£o 5.1 conclu√≠dos).</li>
                                <li><strong>Firestore Database criado</strong> no modo de teste.</li>
                                <li><strong>Autentica√ß√£o habilitada</strong> (e-mail e senha) no Firebase
                                    e no FlutterFlow.</li>
                                <li><strong>Cole√ß√µes criadas</strong> no FlutterFlow com todos os campos
                                    e tipos definidos, conforme o DER da Semana 4.</li>
                                <li><strong>Tabela de planejamento de valida√ß√µes</strong> para cada
                                    formul√°rio do projeto.</li>
                            </ul>
                        </div>
                    </td>
                </tr>
            </table>

            <p>Na pr√≥xima semana (<strong>Semana 6</strong>), voc√™ implementar√° a autentica√ß√£o de
                usu√°rios (criar conta, login, logout) e os fluxos de CRUD ‚Äî cria√ß√£o, edi√ß√£o e
                exclus√£o de registros ‚Äî usando as cole√ß√µes Firestore que acabou de configurar.</p>
        </section>

        <section id='caso-sem5'>
            <h2>5.6 Estudo de Caso: FinanCampus</h2>
            <p>Veja como o grupo do <strong>FinanCampus</strong> configurou o Firebase e definiu as
                cole√ß√µes nesta semana.</p>

            <table class="box-table tip-table">
                <tr>
                    <td class="box-content tip" role="note" aria-labelledby="caso-sem5-label">
                        <div id="caso-sem5-label" class="box-title"><img src="../images/icon-observacao.png"
                                class="icon-img" alt="Estudo de Caso"><strong>üì± Estudo de Caso ‚Äî Semana 5</strong>
                        </div>
                        <div>
                            <p><strong>Configura√ß√£o do Firebase:</strong></p>
                            <ul>
                                <li>Projeto criado: <code>financampus</code></li>
                                <li>Banco Firestore: servidor <em>southamerica-east1</em> (S√£o Paulo)</li>
                                <li>Autentica√ß√£o: e-mail e senha habilitados</li>
                                <li>FlutterFlow conectado com config files gerados automaticamente</li>
                            </ul>
                            <p><strong>Cole√ß√µes definidas no FlutterFlow (4 cole√ß√µes):</strong></p>
                            <ul>
                                <li><strong>categorias:</strong> nome (String), icone (String), cor (String)</li>
                                <li><strong>despesas:</strong> descricao (String), valor (Double),
                                    data (Timestamp), usuarioRef (Reference ‚Üí Users),
                                    categoriaRef (Reference ‚Üí categorias), criadoEm (Timestamp)</li>
                                <li><strong>receitas:</strong> descricao (String), valor (Double),
                                    data (Timestamp), usuarioRef (Reference ‚Üí Users),
                                    criadoEm (Timestamp)</li>
                                <li><strong>perfis:</strong> nome (String), orcamentoMensal (Double),
                                    usuarioRef (Reference ‚Üí Users)</li>
                            </ul>
                            <p><strong>Tabela de planejamento de valida√ß√µes (formul√°rio "Nova Despesa"):</strong></p>
                            <ul>
                                <li>Campo "Valor": TextField num√©rico ‚Äî obrigat√≥rio, maior que zero.</li>
                                <li>Campo "Descri√ß√£o": TextField texto ‚Äî obrigat√≥rio, m√≠nimo 3 caracteres.</li>
                                <li>Campo "Data": DatePicker ‚Äî obrigat√≥rio, sem datas futuras.</li>
                                <li>Campo "Categoria": DropDown vinculado √† cole√ß√£o <code>categorias</code> ‚Äî
                                    obrigat√≥rio.</li>
                            </ul>
                        </div>
                    </td>
                </tr>
            </table>
        </section>

        <div class="page-foot">Prof. Rafael Vargas Mesquita ‚Äî Projeto Integrador ‚Ä¢ Semana 5</div>

    </div>
</body>

</html>